---
title: さくらのクラウドでVyOSを使用する 2019年版
date: 2019-06-30 23:14:10 +0900
---

さくらのクラウドでVyOSを使用する 2019年版
===

さくらのクラウドでは、VyOSが公式イメージから取り除かれてしまいました。
なので、自力でVyOSなマシンを構築する方法を書き捨てておきます。

# 1. VyOSのイメージをダウンロードする

https://wiki.vyos-users.jp/ などから、拡張子が`.ova`形式であるイメージをダウンロードします。

# 2. さくらのクラウドで使える形式に変換する

さくらで使えるのは`.raw`形式です。

以下の通り実行すると、`vyos-1.1.8-amd64.vmx`というファイルと、`vyos-1.1.8-amd64-disk1.vmdk`というファイルが生成されます。

```
$ ovftool vyos-1.1.8-amd64.ova vyos-1.1.8-amd64.vmx
```

次に、以下の通りに実行して、`vyos-1.1.8-amd64-disk1.raw`を生成します。
```
$ qemu-img convert vyos-1.1.8-amd64-disk1.vmdk vyos-1.1.8-amd64-disk1.raw
```

参考: https://cloud-news.sakura.ad.jp/2014/05/02/vmware-to-sacloud/

# 3. アップロード

さくらのクラウドで、「アーカイブ」を新規作成します。
アーカイブソースはブランクにしておいてください。

作成が完了すると、ftpsのホスト、ユーザー名、パスワードが表示されます。
ftpsで接続し、ルートディレクトリ直下に`vyos-1.1.8-amd64-disk1.raw`をアップロードしたら完了です。
ブラウザ側でftpを終了させてください。


以上の手順で、VyOSがマイアーカイブとして追加されます。
VyOSのサーバーを作成する際も、選択するだけでサーバーを作成することができます。
