---
title: "米村研究室が運用しているネットワーク・サーバーインフラについて"
date: 2020-11-15 17:30:00 +0900
---

米村研究室が運用しているネットワーク・サーバーインフラについて
===

## 概要

米村研究室では、部屋の中のネットワークやサーバーの運用を、自分一人が行っています。
今年は去年と比べ大きく構成を変更したため、備忘録も兼ねて紹介します。

## 米村研究室について

認知科学実験室と呼びます。広義の認知科学を研究する研究室です。毎年、認知心理学→ソーシャルエンジニアリング→情報セキュリティ→暗号学と少しづつ分野が広がっていき、実質的には情報セキュリティを研究する研究室となっています。

## 部屋のネットワーク

現在、部屋の内部には2種類のネットワークが存在します。一つが、学科のL2ネットワークと繋がっている外部接続用ネットワーク。もう一つは研究室の中でNATされているネットワークです。
前者は、学科の中からアクセスできるサービスなどを運用するために使い、後者は研究室のメンバーがインターネットやイントラネットに接続するために使っています。

トポロジは以下のようになっています。

![](https://i.imgur.com/IUD3PXD.png)

現状、部屋の右側と左側に外部へのLANポートがあるので、冗長的につないで意図的に間の通信を阻害しています。本来であればSTPで自動化すべきですが手が回らないのでとりあえずこんな風に。

各スイッチのコンフィグと、IPアサインは以下のリポジトリで管理されています。興味があればどうぞ。
https://github.com/onokatio/yonelab-infra

## サーバーラックの物理構成

サーバーラックには、ToRスイッチ1台と、ラックサーバー10台、タワー型サーバー4台が設置されています。
型番とIPアサインは以下のとおりです。

```
address+100=IPMI

- 10.7.29.1   : Primergy S6 1 (MA1A014667)
- 10.7.29.2   : Primergy S6 2 (MA1A011944)
- 10.7.29.3   : Primergy S6 3
- 10.7.29.4   : Primergy S6 4
- 10.7.29.5   : PowerEdge R430 (JH7G7K2)
- 10.7.29.6   : Sakura 1
- 10.7.29.7   : Sakura 2
- 10.7.29.8   : Sakura 3
- 10.7.29.9   : Sakura 4
- 10.7.29.10  : Sakura 5
- 10.7.29.11  : Primergy M1 1 (MAQK005912)
- 10.7.29.12  : Primergy M1 2 (MAQK005904)
- 10.7.29.13  : NEC T110h 1
- 10.7.29.14  : NEC T110h 2
```

## サーバーラックのネットワーク

ラックサーバーには、直接学科からのIPアドレスを割り当てています。ただ、非常にめんどくさいため、Jujuによるnetboot&IPアサインの自動化を構築しています。（が、正しく動かないのでトラコン中。）
Primergy S6を一台Jujuのリージョン/ラックマネージャーにしています。


## 最後に

こうして、米村研究室では中規模のサーバー群を運用し、研究の用に使用するためのインフラを構築しています。1〜4年生で興味のある方は、ぜひ自分に声をかけてください。研究生を（もちろんインフラ管理要員も）をお待ちしております。
